/* Prevent tab size from changing dynamically */
.tabbrowser-tab:not([pinned]) {
    width: var(--uc-tab-width) !important; /* Set a fixed width for all tabs */
    max-width: var(--uc-tab-width) !important; /* Ensure no dynamic resizing */
}

/* Add rounded corners to tabs */
.tabbrowser-tab {
    border-radius: var(--uc-border-radius) !important; /* Apply rounded corners */
    overflow: hidden !important; /* Ensure content fits within the rounded corners */
}

/* Slight border to make unselected tabs visible */
.tabbrowser-tab:not([selected]) {
    border: 1px solid rgba(0, 0, 0, 0.2) !important; /* Light border for unselected tabs */
    box-shadow: 0 0 2px rgba(0, 0, 0, 0.1) !important; /* Optional shadow for unselected tabs */
}

/* Ensure selected tab stands out with no border */
.tabbrowser-tab[selected] {
    border: none !important; /* Remove border for selected tab */
    box-shadow: none !important; /* Remove any shadow */
}

/* Remove gap after pinned tabs */
#tabbrowser-tabs[haspinnedtabs]:not([positionpinnedtabs]) > #tabbrowser-arrowscrollbox > .tabbrowser-tab:nth-child(1 of :not([pinned], [hidden])) {
    margin-inline-start: 0 !important;
}

/* Hides the list-all-tabs button */
#alltabs-button {
    display: var(--uc-show-all-tabs-button) !important;
}

/* Remove tab shadow */
.tabbrowser-tab > .tab-stack > .tab-background {
    box-shadow: none !important;
}

/* Multi tab selection */
#tabbrowser-tabs:not([noshadowfortests]) .tabbrowser-tab:is([multiselected]) > .tab-stack > .tab-background:-moz-lwtheme {
    outline-color: var(--toolbarseparator-color) !important;
}

/* Tab close button options */
.tabbrowser-tab:not([pinned]) .tab-close-button {
    display: var(--show-tab-close-button) !important;
}
.tabbrowser-tab:not([pinned]):hover .tab-close-button {
    display: var(--show-tab-close-button-hover) !important;
}

/* Adaptive tab width (without dynamic resizing) */
.tabbrowser-tab[selected][fadein]:not([pinned]):not(tab-group[collapsed] .tabbrowser-tab) {
    max-width: var(--uc-active-tab-width) !important;
}
.tabbrowser-tab[fadein]:not([selected]):not([pinned]):not(tab-group[collapsed] .tabbrowser-tab) {
    max-width: var(--uc-inactive-tab-width) !important;
}

/* Container tabs indicator */
#TabsToolbar .tab-context-line {
    margin: 2px var(--container-tabs-indicator-margin) 0 var(--container-tabs-indicator-margin) !important;
    height: 1px !important;
}
.tab-context-line {
    box-shadow: var(--uc-identity-glow) var(--identity-tab-color) !important;
}

/* Show favicon when media is playing but tab is hovered */
.tab-icon-image:not([pinned]) {
    opacity: 1 !important;
}

/* Makes the speaker icon always appear if the tab is playing (not only on hover) */
.tab-icon-overlay:not([crashed]),
.tab-icon-overlay[pinned][crashed][selected] {
    top: 5px !important;
    z-index: 1 !important;
    padding: 1.5px !important;
    inset-inline-end: -8px !important;
    width: 16px !important;
    height: 16px !important;
    border-radius: 10px !important;
}

/* Style and position speaker icon */
.tab-icon-overlay:not([sharing], [crashed]):is([soundplaying], [muted], [activemedia-blocked]) {
    stroke: transparent !important;
    background: transparent !important;
    opacity: 1 !important;
    fill-opacity: 0.8 !important;
    color: currentColor !important;
    stroke: var(--toolbar-bgcolor) !important;
    background-color: var(--toolbar-bgcolor) !important;
}

/* Change the colours of the speaker icon on active tab to match tab colours */
.tabbrowser-tab[selected] .tab-icon-overlay:not([sharing], [crashed]):is([soundplaying], [muted], [activemedia-blocked]) {
    stroke: var(--toolbar-bgcolor) !important;
    background-color: var(--toolbar-bgcolor) !important;
}

.tab-icon-overlay:not([pinned], [sharing], [crashed]):is([soundplaying], [muted], [activemedia-blocked]) {
    margin-inline-end: 9.5px !important;
}

/* Speaker icon colour fix */
#TabsToolbar .tab-icon-overlay:not([crashed])[soundplaying],
#TabsToolbar .tab-icon-overlay:not([crashed])[muted],
#TabsToolbar .tab-icon-overlay:not([crashed])[activemedia-blocked] {
    color: var(--toolbar-color) !important;
}

/* Selected tab colour fix */
.tabbrowser-tab[selected] .tab-background {
    background-color: var(--uc-highlight-colour) !important;
    outline: none !important;
}
.tab-background {
    margin: 0px !important;
    border-radius: 0px !important;
}

/* Tab group labels */
.tab-group-label-container > .tab-group-label {
    outline: none !important;
    border-radius: var(--uc-border-radius) !important;
    width: 100%;
    color: light-dark(var(--tab-group-color-pale), var(--tab-group-label-text-dark)) !important;
    background-color: light-dark(var(--tab-group-color), var(--tab-group-color-invert)) !important;
}

/* Hide vertical tabs new tab button */
#vertical-tabs-newtab-button, #tabs-newtab-button {
    display: none !important;
}

